// JSON テスト
表示("=== JSON テスト ===")

// 辞書をJSONに変換
変数 データ = {"名前": "太郎", "年齢": 25, "趣味": ["読書", "プログラミング"]}
変数 json文字列 = JSON化(データ)
表示("JSON化: " + json文字列)

// JSONをパース
変数 解析結果 = JSON解析("{\"message\":\"hello\",\"count\":42,\"items\":[1,2,3]}")
表示("JSON解析: " + 文字列化(解析結果))

// ネストされたJSON
変数 複雑 = JSON解析("{\"user\":{\"name\":\"花子\",\"active\":true},\"scores\":[90,85,95]}")
表示("ユーザー名: " + 文字列化(複雑["user"]["name"]))
表示("スコア: " + 文字列化(複雑["scores"]))

// 配列のJSON
変数 テスト配列 = [1, "hello", 真]
表示("配列JSON: " + JSON化(テスト配列))

表示("")
表示("=== HTTP GET テスト ===")

// パブリックAPIにGETリクエスト
変数 応答 = HTTP取得("https://httpbin.org/get")
表示("ステータス: " + 文字列化(応答["状態"]))

// レスポンスのJSONをパース
変数 本文 = JSON解析(応答["本文"])
表示("User-Agent: " + 文字列化(本文["headers"]["User-Agent"]))

表示("")
表示("=== HTTP POST テスト ===")

// POSTリクエスト（JSON送信）
変数 送信データ = {"名前": "太郎", "メッセージ": "こんにちは"}
変数 結果 = HTTP送信("https://httpbin.org/post", 送信データ)
表示("POSTステータス: " + 文字列化(結果["状態"]))

変数 post本文 = JSON解析(結果["本文"])
表示("送信したデータ: " + 文字列化(post本文["data"]))

表示("")
表示("=== URL エンコード テスト ===")

変数 日本語 = "こんにちは 世界"
変数 エンコード済み = URLエンコード(日本語)
表示("エンコード: " + エンコード済み)

変数 デコード済み = URLデコード(エンコード済み)
表示("デコード: " + デコード済み)

表示("")
表示("=== カスタムヘッダー付きリクエスト ===")

変数 ヘッダー = {"Authorization": "Bearer test-token", "X-Custom": "nihongo-lang"}
変数 応答2 = HTTP取得("https://httpbin.org/headers", ヘッダー)
変数 ヘッダー結果 = JSON解析(応答2["本文"])
表示("カスタムヘッダー: " + 文字列化(ヘッダー結果["headers"]["X-Custom"]))

表示("")
表示("全テスト完了！")
