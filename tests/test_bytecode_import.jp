// HJPB バイトコードインポートテスト
// 事前: ./nihongo build tests/lib_math.jp

変数 合格 = 0
変数 失敗 = 0

関数 チェック(名前, 実際, 期待):
    もし 文字列化(実際) == 文字列化(期待) なら
        合格 = 合格 + 1
    それ以外
        失敗 = 失敗 + 1
        表示("X " + 名前 + ": 期待=" + 文字列化(期待) + " 実際=" + 文字列化(実際))
    終わり
終わり

取り込む "tests/lib_math.hjp" として 数学

チェック("HJPB-加算", 数学["加算"](3, 4), 7)
チェック("HJPB-乗算", 数学["乗算"](5, 6), 30)
チェック("HJPB-階乗(5)", 数学["階乗"](5), 120)
チェック("HJPB-フィボナッチ(8)", 数学["フィボナッチ"](8), 21)
チェック("HJPB-フィボナッチ(10)", 数学["フィボナッチ"](10), 55)

表示("合格: " + 文字列化(合格) + " / 失敗: " + 文字列化(失敗))
もし 失敗 == 0 なら
    表示("全テスト通過")
それ以外
    表示("失敗あり")
終わり
