# はじむ チュートリアル

## はじめに

この言語は、日本語の自然な表現でプログラミングができるように設計されています。
プログラミング初心者でも直感的にコードを書くことができます。

---

## 第1章: 最初のプログラム

### Hello, World!

まず、最も基本的なプログラムを書いてみましょう。

```
// hello.jp
表示("こんにちは、世界！")
```

実行:
```bash
$ nihongo hello.jp
こんにちは、世界！
```

`表示`は画面に文字を出力する関数です。

---

## 第2章: 変数と計算

### 変数の使い方

変数は値を保存するための箱のようなものです。

```
// variables.jp
変数 名前 = "太郎"
変数 年齢 = 25

表示("私の名前は" + 名前 + "です")
表示("年齢は" + 文字列化(年齢) + "歳です")
```

### 計算

```
// calculator.jp
変数 a = 10
変数 b = 3

表示("足し算: " + 文字列化(a + b))   // 13
表示("引き算: " + 文字列化(a - b))   // 7
表示("掛け算: " + 文字列化(a * b))   // 30
表示("割り算: " + 文字列化(a / b))   // 3.333...
表示("余り: " + 文字列化(a % b))     // 1
```

### 定数

変更できない値は「定数」として定義します。

```
定数 消費税率 = 0.1
変数 価格 = 1000
変数 税込価格 = 価格 * (1 + 消費税率)
表示("税込み: " + 文字列化(税込価格) + "円")
```

---

## 第3章: 条件分岐

### もし〜なら

条件によって処理を分けることができます。

```
// if.jp
変数 点数 = 75

もし 点数 >= 80 なら
    表示("優秀です！")
それ以外
    もし 点数 >= 60 なら
        表示("合格です")
    それ以外
        表示("残念、不合格です")
    終わり
終わり
```

### 論理演算

複数の条件を組み合わせることができます。

```
変数 年齢 = 20
変数 学生 = 真

もし 年齢 >= 18 かつ 学生 なら
    表示("成人の学生です")
終わり

もし 年齢 < 18 または 学生 でない なら
    表示("一般チケット")
終わり
```

---

## 第4章: ループ

### 条件ループ

条件が真の間、繰り返します。

```
// countdown.jp
変数 カウント = 5

条件 カウント > 0 の間
    表示(カウント)
    カウント = カウント - 1
終わり

表示("発射！")
```

出力:
```
5
4
3
2
1
発射！
```

### 範囲ループ

指定した範囲で繰り返します。

```
// loop.jp
i を 1 から 5 繰り返す
    表示("カウント: " + 文字列化(i))
終わり
```

### 九九の表

```
// kuku.jp
i を 1 から 9 繰り返す
    j を 1 から 9 繰り返す
        変数 結果 = i * j
        表示(文字列化(i) + " x " + 文字列化(j) + " = " + 文字列化(結果))
    終わり
終わり
```

---

## 第5章: 配列

配列は複数の値をまとめて扱うためのデータ構造です。

```
// array.jp
変数 果物 = ["りんご", "みかん", "ぶどう"]

表示("最初の果物: " + 果物[0])
表示("果物の数: " + 文字列化(長さ(果物)))

// 要素を追加
追加(果物, "バナナ")
表示("追加後: " + 文字列化(果物))
```

### 配列のループ

```
変数 数列 = [1, 2, 3, 4, 5]

変数 合計 = 0
i を 0 から 長さ(数列) - 1 繰り返す
    合計 = 合計 + 数列[i]
終わり

表示("合計: " + 文字列化(合計))
```

---

## 第6章: 関数

関数は、再利用可能なコードのブロックです。

```
// function.jp
関数 挨拶(名前):
    表示("こんにちは、" + 名前 + "さん！")
終わり

挨拶("太郎")
挨拶("花子")
```

### 戻り値のある関数

```
関数 面積(幅, 高さ):
    戻す 幅 * 高さ
終わり

変数 結果 = 面積(5, 3)
表示("面積: " + 文字列化(結果))  // 15
```

### 再帰関数

関数が自分自身を呼び出すこともできます。

```
関数 階乗(n):
    もし n <= 1 なら
        戻す 1
    それ以外
        戻す n * 階乗(n - 1)
    終わり
終わり

表示("5! = " + 文字列化(階乗(5)))  // 120
```

---

## 第7章: クラスとオブジェクト

クラスを使うと、データとその操作をまとめて定義できます。

```
// class.jp
型 犬:
    初期化(名前, 年齢):
        自分.名前 = 名前
        自分.年齢 = 年齢
    終わり

    関数 吠える():
        表示(自分.名前 + "がワン！と吠えました")
    終わり

    関数 情報():
        表示(自分.名前 + "は" + 文字列化(自分.年齢) + "歳です")
    終わり
終わり

変数 ポチ = 新規 犬("ポチ", 3)
ポチ.情報()
ポチ.吠える()
```

出力:
```
ポチは3歳です
ポチがワン！と吠えました
```

### 継承

既存のクラスを拡張できます。

```
型 動物:
    初期化(名前):
        自分.名前 = 名前
    終わり

    関数 鳴く():
        表示(自分.名前 + "が鳴いています")
    終わり
終わり

型 猫 継承 動物:
    関数 にゃー():
        表示(自分.名前 + "がにゃーと鳴きました")
    終わり
終わり

変数 タマ = 新規 猫("タマ")
タマ.鳴く()    // 親クラスのメソッド
タマ.にゃー()  // 子クラスのメソッド
```

---

## 第8章: 例外処理

エラーが発生しても、プログラムを適切に処理できます。

```
// exception.jp
関数 割り算(a, b):
    もし b == 0 なら
        投げる "ゼロで割ることはできません"
    終わり
    戻す a / b
終わり

試行:
    変数 結果 = 割り算(10, 0)
    表示("結果: " + 文字列化(結果))
捕獲 エラー:
    表示("エラーが発生: " + エラー)
最終:
    表示("処理完了")
終わり
```

出力:
```
エラーが発生: ゼロで割ることはできません
処理完了
```

---

## 第9章: ファイル操作

ファイルの読み書きができます。

```
// file.jp

// ファイルに書き込み
書き込む("memo.txt", "これはメモです。\n日本語も使えます。")

// ファイルが存在するか確認
もし ファイル存在("memo.txt") なら
    表示("ファイルが見つかりました")
終わり

// ファイルを読み込み
変数 内容 = 読み込む("memo.txt")
表示("ファイルの内容:")
表示(内容)
```

---

## 第10章: 実践的なプログラム

### じゃんけんゲーム

```
// janken.jp
関数 じゃんけん():
    変数 選択肢 = ["グー", "チョキ", "パー"]
    
    表示("じゃんけんをしましょう！")
    表示("0: グー, 1: チョキ, 2: パー")
    
    変数 プレイヤー入力 = 入力("あなたの手: ")
    変数 プレイヤー = 数値化(プレイヤー入力)
    
    変数 コンピュータ = 切り捨て(乱数() * 3)
    
    表示("あなた: " + 選択肢[プレイヤー])
    表示("コンピュータ: " + 選択肢[コンピュータ])
    
    もし プレイヤー == コンピュータ なら
        表示("あいこ！")
    それ以外
        変数 勝ち = (プレイヤー == 0 かつ コンピュータ == 1) または
                   (プレイヤー == 1 かつ コンピュータ == 2) または
                   (プレイヤー == 2 かつ コンピュータ == 0)
        もし 勝ち なら
            表示("あなたの勝ち！")
        それ以外
            表示("あなたの負け...")
        終わり
    終わり
終わり

じゃんけん()
```

### 簡単な電卓

```
// dentaku.jp
関数 電卓():
    表示("=== 簡単電卓 ===")
    
    変数 数1 = 数値化(入力("1つ目の数: "))
    変数 演算子 = 入力("演算子 (+, -, *, /): ")
    変数 数2 = 数値化(入力("2つ目の数: "))
    
    変数 結果 = 0
    
    もし 演算子 == "+" なら
        結果 = 数1 + 数2
    それ以外
        もし 演算子 == "-" なら
            結果 = 数1 - 数2
        それ以外
            もし 演算子 == "*" なら
                結果 = 数1 * 数2
            それ以外
                もし 演算子 == "/" なら
                    もし 数2 == 0 なら
                        表示("エラー: ゼロで割れません")
                        戻す
                    終わり
                    結果 = 数1 / 数2
                それ以外
                    表示("不明な演算子です")
                    戻す
                終わり
            終わり
        終わり
    終わり
    
    表示("結果: " + 文字列化(結果))
終わり

電卓()
```

---

## モジュールとパッケージ

### モジュールの取り込み

他のファイルの関数や変数を使いたいときは `取り込む` を使います。

まず、ユーティリティファイルを作成します：

```
// utils.jp
関数 二乗(n):
    戻す n * n
終わり

関数 挨拶(名前):
    表示("こんにちは、" + 名前 + "さん！")
終わり
```

次に、メインファイルから取り込みます：

```
// main.jp
取り込む "utils.jp"

挨拶("太郎")       // → こんにちは、太郎さん！
表示(二乗(5))      // → 25
```

### 名前空間付きインポート

`として` を使うと、取り込んだモジュールに名前空間を付けられます。
名前の衝突を防ぐのに便利です。

```
取り込む "utils.jp" として ツール

ツール["挨拶"]("花子")      // → こんにちは、花子さん！
表示(ツール["二乗"](3))     // → 9
```

### パッケージ管理

はじむには外部パッケージを管理するためのパッケージマネージャが内蔵されています。

#### プロジェクトの初期化

```bash
hajimu パッケージ 初期化
```

これで `hajimu.json`（マニフェストファイル）が生成されます。

#### パッケージの追加

GitHubリポジトリからパッケージを追加できます：

```bash
hajimu パッケージ 追加 user/repo
```

#### パッケージの使用

インストールしたパッケージは `取り込む` で使えます：

```
// パッケージ名で取り込む
取り込む "my-library"

// 名前空間付きで取り込む
取り込む "my-library" として ライブラリ
```

#### その他のコマンド

```bash
# パッケージ一覧
hajimu パッケージ 一覧

# パッケージの削除
hajimu パッケージ 削除 パッケージ名

# 依存パッケージの一括インストール
hajimu パッケージ インストール
```

詳しくは[リファレンスマニュアル](REFERENCE.md)の「パッケージ管理」セクションを参照してください。

---

## プラットフォーム検出

実行している OS やアーキテクチャを組み込み定数で取得できます。

```jp
表示(システム名)           // → "macOS" / "Linux" / "Windows"
表示(アーキテクチャ)       // → "arm64" / "x86-64"
表示(はじむバージョン)     // → "1.3.0"

// システム辞書で詳細情報を取得
表示(システム["OS"])        // → "macOS"
表示(システム["区切り文字"]) // → "/" (Windows では "\\")
表示(システム["改行"])      // → "\n" (Windows では "\r\n")
```

プラットフォームに応じて処理を分岐する例:

```jp
もし システム名 == "Windows" ならば {
  表示("Windows 環境です")
} それ以外 もし システム名 == "macOS" ならば {
  表示("macOS 環境です")
} それ以外 {
  表示("Linux 環境です")
}
```

### C 拡張プラグインのプラットフォーム自動選択

`取り込む "engine_render"` のように指定すると、はじむは現在の OS に合わせて以下のファイルを自動選択します。

| OS | 選択されるファイル |
|---|---|
| macOS (Apple Silicon) | `engine_render-macos-arm64.hjp` |
| macOS (Intel) | `engine_render-macos.hjp` |
| Linux (x86-64) | `engine_render-linux-x64.hjp` |
| Windows | `engine_render-windows-x64.hjp` |

外部パッケージの開発方法は[外部パッケージ開発ガイド](外部パッケージ開発ガイド.md)を参照してください。

---

## おわりに

おめでとうございます！これではじむの基本を学びました。

さらに学ぶには：
- [リファレンスマニュアル](REFERENCE.md)を参照
- testsフォルダのサンプルプログラムを試す
- デバッグモード (`nihongo -d`) でプログラムの動作を確認

楽しいプログラミングを！
