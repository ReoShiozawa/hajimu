// ===== 統合テスト =====
変数 テスト数 = 0
変数 成功数 = 0

関数 テスト(名前, 実際, 期待):
    テスト数 = テスト数 + 1
    もし 文字列化(実際) == 文字列化(期待) なら
        成功数 = 成功数 + 1
    それ以外
        表示("✗ " + 名前 + ": 期待=" + 文字列化(期待) + " 実際=" + 文字列化(実際))
    終わり
終わり

// --- 1. 文字列補間 ---
変数 名前 = "太郎"
変数 年齢 = 25
テスト("文字列補間", "{名前}は{年齢}歳", "太郎は25歳")
テスト("文字列補間(計算)", "{1 + 2}", "3")

// --- 2. デフォルト引数 ---
関数 挨拶(名 = "ゲスト", 接頭 = "こんにちは"):
    戻す 接頭 + "、" + 名 + "！"
終わり
テスト("デフォルト引数(全省略)", 挨拶(), "こんにちは、ゲスト！")
テスト("デフォルト引数(1つ)", 挨拶("太郎"), "こんにちは、太郎！")
テスト("デフォルト引数(全指定)", 挨拶("太郎", "やあ"), "やあ、太郎！")

// --- 3. else-if ---
関数 成績(点数):
    もし 点数 >= 90 なら
        戻す "優"
    それ以外もし 点数 >= 70 なら
        戻す "良"
    それ以外もし 点数 >= 50 なら
        戻す "可"
    それ以外
        戻す "不可"
    終わり
終わり
テスト("else-if(優)", 成績(95), "優")
テスト("else-if(良)", 成績(80), "良")
テスト("else-if(可)", 成績(60), "可")
テスト("else-if(不可)", 成績(30), "不可")

// --- 4. 型チェック ---
テスト("数値か(真)", 数値か(42), 真)
テスト("数値か(偽)", 数値か("abc"), 偽)
テスト("文字列か", 文字列か("hello"), 真)
テスト("真偽か", 真偽か(真), 真)
テスト("配列か", 配列か([1,2,3]), 真)
テスト("辞書か", 辞書か({"a": 1}), 真)
テスト("無か(真)", 無か(無), 真)
テスト("無か(偽)", 無か(42), 偽)
テスト("関数か", 関数か(表示), 真)

// --- 5. 複数行文字列 ---
変数 複数行 = """行1
行2
行3"""
テスト("複数行文字列", 複数行, "行1\n行2\n行3")

// --- 6. 範囲関数 ---
テスト("範囲(5)", 範囲(5), [0, 1, 2, 3, 4])
テスト("範囲(2,5)", 範囲(2, 5), [2, 3, 4])
テスト("範囲(0,10,3)", 範囲(0, 10, 3), [0, 3, 6, 9])

// --- 7. ビット演算 ---
テスト("ビット積", ビット積(12, 10), 8)
テスト("ビット和", ビット和(12, 10), 14)
テスト("ビット排他", ビット排他(12, 10), 6)
テスト("左シフト", 左シフト(1, 4), 16)
テスト("右シフト", 右シフト(16, 2), 4)

// --- 8. パイプ演算子 ---
関数 二倍(甲):
    戻す 甲 * 2
終わり
関数 足す十(甲):
    戻す 甲 + 10
終わり
テスト("パイプ(単)", 5 |> 二倍, 10)
テスト("パイプ(連鎖)", 5 |> 二倍 |> 足す十, 20)

// --- 結果表示 ---
表示("")
表示("===== テスト結果 =====")
表示("{成功数}/{テスト数} テスト成功")
もし 成功数 == テスト数 なら
    表示("✓ 全テスト通過！")
それ以外
    表示("✗ 失敗あり")
終わり
