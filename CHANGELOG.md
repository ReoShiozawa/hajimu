# チェンジログ

すべての注目すべき変更はこのプロジェクトに記録されます。

## [v1.1.0] - 2026-02-08

### 🔌 統一プラグイン形式 `.hjp`

クロスプラットフォーム対応の統一拡張子 `.hjp`（Hajimu Plugin）を導入。

#### 変更
- プラグイン拡張子を OS 固有形式（.so/.dylib/.dll）から統一 `.hjp` 形式に移行
- 拡張子なしインポート対応（`取り込む "名前"` で自動検索）
- 4段階プラグイン検索: 呼出元相対 → CWD → `hajimu_packages/` → `~/.hajimu/plugins/`
- Windows 対応のプラットフォーム抽象化レイヤー（LoadLibrary/GetProcAddress）
- ドキュメント全面更新（REFERENCE.md、README.md、ROADMAP.md）

---

## [v1.0.0] - 2026-02-XX

### 🎉 公開リリース

**はじむ（Hajimu）** として正式に一般公開。

#### 変更
- 言語名を「日本語プログラミング言語」から「**はじむ**」に正式決定
- リポジトリを https://github.com/ReoShiozawa/hajimu に移行
- ドキュメントサイトを https://reoshiozawa.github.io/hajimu-document/ に移行

#### 追加
- **Homebrew サポート**: `brew install ReoShiozawa/hajimu/hajimu`
- **パッケージ管理**: 内蔵パッケージマネージャ（`hajimu パッケージ 初期化/追加/削除/一覧/インストール`）
  - `hajimu.json` マニフェストファイルによる依存管理
  - GitHub リポジトリ / ローカルリポジトリからのパッケージインストール
  - `hajimu_packages/`（ローカル）、`~/.hajimu/packages/`（グローバル）の2層パッケージ格納
  - 再帰的な依存パッケージの自動インストール
- **取り込みの強化**: パッケージ名解決、呼び出し元相対パス解決、重複インポート防止、循環参照検出
- **C拡張プラグイン**: 統一拡張子 `.hjp` によるクロスプラットフォーム（Windows/macOS/Linux）ネイティブプラグイン
  - `hajimu_plugin.h` プラグイン開発用公開ヘッダー
  - 拡張子なしインポート対応（`取り込む "名前"` で自動検索）
  - 4段階検索: 呼出元相対 → CWD → `hajimu_packages/` → `~/.hajimu/plugins/`
  - C/C++/Rust/Go/Zig 等ではじむ用ライブラリを開発可能
  - サンプルプラグイン（examples/plugins/）を同梱
- **VS Code 拡張**: はじむ言語サポート（シンタックスハイライト、スニペット、自動補完）
- **LICENSE**: MIT License を明記
- **CONTRIBUTING.md**: コントリビューションガイドラインを追加
- **GitHub テンプレート**: Issue/PR テンプレートを追加
- **Formula/hajimu.rb**: Homebrew Formula を追加

#### ドキュメント
- README.md を公開用に全面刷新
  - バッジ追加（License, Release, Stars）
  - インストール手順（Homebrew + ソースビルド）
  - 機能リスト、クイックスタート、言語比較表を追加
- すべてのドキュメントで「はじむ」の名称に統一
- GitHub URL を ReoShiozawa/hajimu に更新

## [v0.2.0] - 2026-02-06

### 追加

#### 新機能

1. **文字列補間** (`{式}`)
   - 文字列内に `{}` を使用して式を埋め込み可能
   - 例: `"{名前}は{年齢}歳"` → `"太郎は25歳"`
   - `evaluate_string_interpolation()` で実装

2. **デフォルト引数**
   - 関数のパラメータにデフォルト値を指定可能
   - 例: `関数 foo(甲, 乙=10):`
   - 呼び出し時に引数の省略が可能
   - ast.h の Parameter 構造体に `default_value` フィールド追加

3. **else-if チェーン** (`それ以外もし`)
   - 複数の条件分岐を効率的に記述可能
   - `TOKEN_ELSE_IF` キーワード追加
   - パーサーで `pipe_expr()` → `or_expr()` 方式に統一

4. **型チェック関数**
   - `数値か()`, `文字列か()`, `真偽か()`, `配列か()`, `辞書か()`, `関数か()`, `無か()`
   - すべての型判定が可能
   - `無` リテラル (`TOKEN_NULL_LITERAL`) も追加

5. **複数行文字列** (`"""..."""`)
   - `"""` で囲んだ文字列は改行を含む
   - `scan_multiline_string()` で実装
   - エスケープシーケンスにも対応

6. **範囲関数** (`範囲`)
   - `範囲(終了)` - 0から終了まで
   - `範囲(開始, 終了)` - 開始から終了まで
   - `範囲(開始, 終了, ステップ)` - ステップ指定可能
   - `builtin_range()` で実装

7. **ビット演算関数**
   - `ビット積(a, b)` - AND (`&`)
   - `ビット和(a, b)` - OR (`|`)
   - `ビット排他(a, b)` - XOR (`^`)
   - `ビット否定(a)` - NOT (`~`)
   - `左シフト(a, b)` - 左シフト (`<<`)
   - `右シフト(a, b)` - 右シフト (`>>`)
   - ビルトイン関数として実装（`long long` で処理）

8. **パイプ演算子** (`|>`)
   - `式 |> 関数` を `関数(式)` に変換
   - 関数合成に便利
   - `TOKEN_PIPE` キーワード追加
   - パーサーの `pipe_expr()` で実装

### 変更

- lexer.h: TOKEN 追加 (`TOKEN_ELSE_IF`, `TOKEN_NULL_LITERAL`, `TOKEN_PIPE`)
- parser.c: パイプ演算子の優先度最低として処理
- evaluator.c: ビルトイン関数群を大幅追加（合計8種類）
- ドキュメント更新: REFERENCE.md に新機能の説明を追加

### テスト

- `test_all.jp` で全機能の統合テスト実施
- 29個のテストケースがすべて成功

## [v0.1.0] - 前回のリリース

### 機能

- 基本的な文法 (変数、関数、制御構文)
- 組み込み関数 (表示、長さ、配列操作など)
- UTF-8 サポート
- AST 評価
- エラーハンドリング
